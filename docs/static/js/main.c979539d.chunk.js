(this["webpackJsonpview-spectra"]=this["webpackJsonpview-spectra"]||[]).push([[0],{56:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),s=n.n(c),i=(n(56),n(6)),l=(n(57),n(58),n(67)),o=n(68),u=n(20),p=n(35),h=n(5),d=function(e){var t=Math.max.apply(Math,e.map((function(e){return e[1]})));return t>0&&(e=e.map((function(e){return[e[0],e[1]/t]}))),e},j=function(e){var t=Object(a.useRef)(null),c=r.a.useState(!0),s=Object(i.a)(c,2),j=s[0],b=s[1];return Object(a.useEffect)((function(){var a=function(e){var t={height:parseFloat(e.height)||400,width:parseFloat(e.width)||600,specA:{precursorMz:parseFloat(e.specA.precursorMz)||null,peaks:null},specB:{precursorMz:parseFloat(e.specB.precursorMz)||null,peaks:null}},n=function(e){if(e&&e.length>0){var t=[],n=e.split(/\r\n|\r|\n/).filter((function(e){return e.trim()}));return n.length>1?n.forEach((function(e){var n=[];e.match(/\d+\.*\d*/g).forEach((function(e){n.push(parseFloat(e))})),n.length>=2&&t.push([n[0],n[1]])})):(e.match(/\d+\.*\d*/g).forEach((function(e){t.push(parseFloat(e))})),t=t.reduce((function(e,t,n){return n%2===0?e.push([t]):e[e.length-1].push(t),e}),[])),(t[t.length-1]||[]).length<2&&t.pop(),t.length>0?t:null}return null};return t.specA.peaks=n(e.specA.peaks||null)||null,t.specB.peaks=n(e.specB.peaks||null)||null,t}(e.data);if(a&&a.specA&&a.specA.peaks){b(!1);var r=a.height||400,c=a.width||600,s=a.specA.precursorMz,i=a.specB.precursorMz,l=a.specA.peaks,o=a.specB.peaks;Promise.all([n.e(2),n.e(4)]).then(n.t.bind(null,1237,7)).then((function(e){var n,a,h;o?(h=!0,n=d(l),a=d(o)):(h=!1,n=l);var j,b=[],m=Object(p.a)(n);try{for(m.s();!(j=m.n()).done;){var x=j.value;b.push({x0:x[0],x1:x[0],y0:0,y1:x[1],line:{color:"#8884d8",width:1},type:"line"})}}catch(F){m.e(F)}finally{m.f()}var f,O,g,v=[{x:n.map((function(e){return e[0]})),y:n.map((function(e){return e[1]})),hovertemplate:"m/z: %{x}<br>Abundance: %{y}<extra></extra>",showlegend:!1,mode:"markers",type:"scatter",hoverlabel:{bgcolor:"#FFF"},marker:{color:"#8884d8",size:.1}}];if(h){var y,w=Object(p.a)(a);try{for(w.s();!(y=w.n()).done;){var M=y.value;b.push({x0:M[0],x1:M[0],y0:0,y1:-M[1],line:{color:"#d88484",width:1},type:"line"})}}catch(F){w.e(F)}finally{w.f()}v.push({x:a.map((function(e){return e[0]})),y:a.map((function(e){return-e[1]})),hovertemplate:"m/z: %{x}<br>Abundance: %{y}<extra></extra>",showlegend:!1,mode:"markers",type:"scatter",hoverlabel:{bgcolor:"#FFF"},marker:{color:"#8884d8",size:.1}})}h?(f=1.05*Math.max.apply(Math,Object(u.a)(n.map((function(e){return e[0]}))).concat(Object(u.a)(a.map((function(e){return e[0]}))),[s,i])),g=1.2,O=-1.2):(f=1.05*Math.max.apply(Math,Object(u.a)(n.map((function(e){return e[0]}))).concat([s])),g=1.2*Math.max.apply(Math,Object(u.a)(n.map((function(e){return e[1]})))),O=0),s&&!isNaN(s)&&b.push({x0:s,x1:s,y0:0,y1:g,type:"line",line:{color:"black",width:1,dash:"dot"}}),i&&!isNaN(i)&&b.push({x0:i,x1:i,y0:0,y1:O,type:"line",line:{color:"black",width:1,dash:"dot"}});var k={xaxis:{title:{text:"m/z"},range:[0,f]},yaxis:{title:{text:"Abundance"},range:[O,g]},hovermode:"closest",shapes:b,margin:{l:55,r:10,b:30,t:10,pad:0}};h&&(k.yaxis.title.text="Normalized abundance"),k.height=r,k.width=c;var z={responsive:!0,scrollZoom:!0,displayModeBar:!0,displaylogo:!1,modeBarButtonsToRemove:["select2d","lasso2d","zoomIn2d","zoomOut2d","autoScale2d","zoom2d","pan2d"],toImageButtonOptions:{format:"svg",filename:"spectrum",height:r,width:c,scale:1}};t.current&&e.newPlot(t.current,v,k,z)}))}else b(!0)}),[e.data]),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{hidden:!j,children:Object(h.jsx)(l.a,{justify:"space-around",align:"middle",style:{height:"600px"},children:Object(h.jsx)(o.a,{children:Object(h.jsx)("h1",{children:"Input the spectral data to visual it."})})})}),Object(h.jsx)("div",{hidden:j,ref:t})]})},b=n(2),m=n(64),x=n(66),f=n(65),O=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(l.a,{justify:"left",children:[Object(h.jsx)(o.a,{span:8,children:"Precursor m/z:"}),Object(h.jsx)(o.a,{span:16,children:Object(h.jsx)(f.a,{value:e.stateSpectrum.precursorMz,onChange:function(t){return e.setSpectrum(Object(b.a)(Object(b.a)({},e.stateSpectrum),{},{precursorMz:t.target.value}))},style:{width:"100px"}})})]}),Object(h.jsxs)(l.a,{justify:"left",children:[Object(h.jsx)(o.a,{span:8,children:"Peaks:"}),Object(h.jsx)(f.a.TextArea,{rows:"9",value:e.stateSpectrum.peaks,onChange:function(t){return e.setSpectrum(Object(b.a)(Object(b.a)({},e.stateSpectrum),{},{peaks:t.target.value}))}})]})]})},g=function(e){var t=e.stateData,n=e.setData,r=Object(a.useState)({precursorMz:null,peaks:""}),c=Object(i.a)(r,2),s=c[0],u=c[1],p=Object(a.useState)({precursorMz:null,peaks:""}),d=Object(i.a)(p,2),j=d[0],f=d[1];return Object(a.useEffect)((function(){n(Object(b.a)(Object(b.a)({},t),{},{specA:s,specB:j}))}),[s,j]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{stateSpectrum:s,setSpectrum:u}),Object(h.jsx)(m.a,{plain:!0,style:{marginTop:"8px",marginBottom:"8px"},children:"Tail spectrum (optional)"}),Object(h.jsx)(O,{stateSpectrum:j,setSpectrum:f}),Object(h.jsx)(m.a,{plain:!0,style:{marginTop:"8px",marginBottom:"8px"},children:"Plot size"}),Object(h.jsxs)(l.a,{children:[Object(h.jsxs)(o.a,{span:12,children:["Height (px): ",Object(h.jsx)(x.a,{precision:0,step:50,min:50,value:t.height,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{height:e}))}})]}),Object(h.jsxs)(o.a,{span:12,children:["Weight (px): ",Object(h.jsx)(x.a,{precision:0,step:50,min:50,value:t.width,onChange:function(e){return n(Object(b.a)(Object(b.a)({},t),{},{width:e}))}})]})]})]})};var v=function(){var e=Object(a.useState)({height:Math.min(.8*window.innerWidth*2/3,400),width:Math.min(.8*window.innerWidth,600),specA:{},specB:{}}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){window.innerWidth>=768&&r({height:Math.min(.8*window.innerWidth*2/3*2/3,400),width:Math.min(.8*window.innerWidth*2/3,600),specA:{},specB:{}})}),[]),Object(a.useEffect)((function(){}),[n]),Object(h.jsxs)("div",{children:[Object(h.jsx)(l.a,{justify:"center",style:{boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"},children:Object(h.jsx)("h2",{children:"Spectra Visualizer"})}),Object(h.jsx)("br",{}),Object(h.jsxs)(l.a,{justify:"center",align:"middle",children:[Object(h.jsx)(o.a,{md:6,sm:23,children:Object(h.jsx)(g,{stateData:n,setData:r})}),Object(h.jsx)(o.a,{md:16,sm:23,children:Object(h.jsx)(l.a,{justify:"center",align:"middle",children:Object(h.jsx)(j,{data:n})})})]})]})},y=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,1238)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(h.jsx)(v,{}),document.getElementById("root")),y()}},[[61,1,3]]]);
//# sourceMappingURL=main.c979539d.chunk.js.map